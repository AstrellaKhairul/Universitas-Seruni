<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Peta Interaktif Kampus Universitas Seruni</title>
  <style>
    :root{
      --bg:#fbfcfe; --card:#ffffff; --accent:#1e3a8a; --muted:#6b7280; --glass: rgba(255,255,255,0.7);
      --map-bg: linear-gradient(180deg,#eef2ff 0%, #f8fafc 100%);
    }
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; background:var(--map-bg); color:#0f172a}
    header{padding:28px 32px; display:flex;align-items:center; gap:16px}
    header h1{font-size:20px;margin:0;color:var(--accent)}
    .wrap{max-width:1200px;margin:0 auto;padding:10px 20px 80px}

    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.08);padding:18px}

    .layout{display:grid;grid-template-columns:1fr 380px;gap:20px}
    @media(max-width:980px){.layout{grid-template-columns:1fr} .side{order:2}}

    /* MAP area */
    .map-wrap{height:640px;border-radius:12px;overflow:hidden;position:relative}
    .map-canvas{width:100%;height:100%;display:block;background:linear-gradient(180deg,#eaf2ff 0,#ffffff 60%);}

    /* campus list */
    .side{display:flex;flex-direction:column;gap:12px}
    .info{padding:14px}
    .campus-item{display:flex;gap:12px;align-items:flex-start;padding:10px;border-radius:10px;cursor:pointer}
    .campus-item:hover{background:#f3f6ff}
    .campus-dot{width:12px;height:12px;border-radius:50%;background:var(--accent);flex:0 0 12px;margin-top:6px}
    .campus-title{font-weight:600}
    .muted{color:var(--muted);font-size:13px}

    /* popup panel */
    .panel{position: absolute; right:18px; top:18px; width:320px; max-width:calc(100% - 36px); z-index:80;}
    .panel .card{padding:16px}
    .panel h3{margin:0 0 6px 0;color:var(--accent)}
    .badge{display:inline-block;background:#eef2ff;color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px}

    /* controls */
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(30,58,138,0.12)}

    /* legend */
    .legend{display:flex;flex-direction:column;gap:8px;padding:10px}
    .legend-row{display:flex;gap:8px;align-items:center}
    .legend-color{width:14px;height:14px;border-radius:4px}

    /* animated shuttle */
    .route{stroke:#10b981;stroke-width:3;fill:none;opacity:0.9}
    .shuttle{fill:#ffb703;stroke:#ff8b00;stroke-width:1}

    footer{padding:28px 32px;text-align:center;color:var(--muted);font-size:14px}
  </style>
</head>
<body>
  <header class="wrap"><h1>Universitas Seruni — Peta Interaktif (4 Kampus + RIK)</h1></header>

  <main class="wrap layout">
    <section>
      <div class="card map-wrap" id="mapCard">
        <!-- SVG map (stylized) -->
        <svg id="campusMap" class="map-canvas" viewBox="0 0 1200 700" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
          <!-- soft background shapes -->
          <defs>
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
              <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>

          <!-- stylized regions -->
          <rect x="0" y="0" width="1200" height="700" fill="transparent"/>

          <!-- positions (approx) -->
          <!-- Kampus Utama (Jakarta Selatan) -->
          <g id="KampusUtama" transform="translate(300,220)" class="campus">
            <circle cx="0" cy="0" r="34" fill="#fff" stroke="#1e3a8a" stroke-width="3"/>
            <text x="52" y="6" font-size="16" fill="#0f172a" font-weight="700">Kampus Utama</text>
          </g>

          <!-- Kampus Kesehatan (Jakarta Pusat) -->
          <g id="KampusKesehatan" transform="translate(540,110)" class="campus">
            <rect x="-36" y="-36" width="72" height="72" rx="14" fill="#fff" stroke="#1e3a8a" stroke-width="3"/>
            <text x="52" y="6" font-size="16" fill="#0f172a" font-weight="700">Kampus Kesehatan</text>
          </g>

          <!-- Kampus Selatan (Bogor) -->
          <g id="KampusSelatan" transform="translate(210,520)" class="campus">
            <polygon points="0,-40 36,20 -36,20" fill="#fff" stroke="#1e3a8a" stroke-width="3"/>
            <text x="52" y="6" font-size="16" fill="#0f172a" font-weight="700">Kampus Selatan</text>
          </g>

          <!-- Kampus Vokasi (Jakarta Timur) -->
          <g id="KampusVokasi" transform="translate(760,360)" class="campus">
            <ellipse cx="0" cy="0" rx="36" ry="24" fill="#fff" stroke="#1e3a8a" stroke-width="3"/>
            <text x="52" y="6" font-size="16" fill="#0f172a" font-weight="700">Kampus Vokasi</text>
          </g>

          <!-- RIK (Rumpun Ilmu Kesehatan) inside Kampus Utama area -->
          <g id="RIK" transform="translate(360,270)" class="campus">
            <circle cx="0" cy="0" r="18" fill="#fff" stroke="#10b981" stroke-width="3"/>
            <text x="22" y="6" font-size="14" fill="#065f46" font-weight="700">RIK (S1)</text>
          </g>

          <!-- shuttle routes (curved lines) -->
          <path id="route_UK" d="M330,240 C420,200 520,140 540,140" class="route"/>
          <path id="route_US" d="M300,250 C240,350 220,450 240,520" class="route"/>
          <path id="route_UV" d="M335,235 C500,280 700,340 760,360" class="route"/>
          <path id="route_KS" d="M540,140 C420,260 300,460 240,520" class="route"/>

          <!-- shuttle animated icon (a small circle that moves on routes) -->
          <g id="shuttleGroup">
            <circle id="shuttle" class="shuttle" r="8" cx="330" cy="240"/>
          </g>

        </svg>

        <!-- popup panel (hidden by default) -->
        <div class="panel" id="panel" style="display:none">
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <h3 id="panelTitle">Kampus</h3>
                <div class="muted" id="panelSub">Lokasi</div>
              </div>
              <div><span class="badge" id="panelBadge">Info</span></div>
            </div>
            <hr style="border:none;border-top:1px solid #eef2ff;margin:12px 0">
            <div id="panelBody" style="font-size:14px;line-height:1.5" class="muted">Deskripsi singkat kampus.</div>
            <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
              <div>
                <div class="muted" style="font-size:13px">Bus Antar-Kampus</div>
                <div style="font-weight:700">Setiap 30 menit</div>
              </div>
              <div>
                <button class="btn" id="btnClose">Tutup</button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
        <button class="btn" id="toggleRoutes">Tampilkan/ Sembunyikan Rute</button>
        <button class="btn ghost" id="playShuttle">Mulai Shuttle</button>
        <button class="btn ghost" id="stopShuttle">Hentikan Shuttle</button>
      </div>

    </section>

    <aside class="side">
      <div class="card">
        <div class="info">
          <h3 style="margin:0">Daftar Kampus</h3>
          <p class="muted">Klik salah satu kampus untuk melihat info & layanan transportasi</p>
        </div>
        <div style="padding:12px;display:flex;flex-direction:column;gap:6px">
          <div class="campus-item" data-id="KampusUtama"><div class="campus-dot"></div><div><div class="campus-title">Kampus Utama</div><div class="muted">Jakarta Selatan — Fakultas utama & RIK (S1)</div></div></div>
          <div class="campus-item" data-id="KampusKesehatan"><div class="campus-dot"></div><div><div class="campus-title">Kampus Kesehatan</div><div class="muted">Jakarta Pusat — Profesi & Klinik (pasca/S2/S3)</div></div></div>
          <div class="campus-item" data-id="KampusSelatan"><div class="campus-dot"></div><div><div class="campus-title">Kampus Selatan</div><div class="muted">Bogor Barat — Pertanian, Kehutanan, Seni</div></div></div>
          <div class="campus-item" data-id="KampusVokasi"><div class="campus-dot"></div><div><div class="campus-title">Kampus Vokasi</div><div class="muted">Jakarta Timur — Pendidikan Vokasi, teaching factory</div></div></div>
        </div>
        <div style="padding:12px;border-top:1px solid #f3f6ff">
          <h4 style="margin:0 0 6px 0">Legend</h4>
          <div class="legend">
            <div class="legend-row"><div class="legend-color" style="background:var(--accent)"></div><div class="muted">Kampus Utama & Fasilitas</div></div>
            <div class="legend-row"><div class="legend-color" style="background:#10b981"></div><div class="muted">RIK (Rumpun Ilmu Kesehatan - S1)</div></div>
            <div class="legend-row"><div class="legend-color" style="background:#ffb703"></div><div class="muted">Shuttle (animasi)</div></div>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div style="padding:12px">
          <h3 style="margin:0">Informasi Shuttle</h3>
          <p class="muted">Rute antar kampus beroperasi setiap 30 menit. Shuttle internal beroperasi di Kampus Utama & Selatan untuk berhenti di fakultas & fasilitas.</p>

          <table style="width:100%;margin-top:8px;border-collapse:collapse;font-size:14px">
            <tr><td style="padding:8px;border-bottom:1px solid #f3f6ff">Rute</td><td style="padding:8px;border-bottom:1px solid #f3f6ff">Frekuensi</td></tr>
            <tr><td style="padding:8px">Kampus Utama ↔ Kampus Kesehatan</td><td style="padding:8px">Setiap 30 menit</td></tr>
            <tr><td style="padding:8px">Kampus Utama ↔ Kampus Selatan</td><td style="padding:8px">Setiap 30 menit (antar-kota)</td></tr>
            <tr><td style="padding:8px">Kampus Utama ↔ Kampus Vokasi</td><td style="padding:8px">Setiap 30 menit</td></tr>
            <tr><td style="padding:8px">Shuttle internal (Utama/Selatan)</td><td style="padding:8px">Loop tiap 15-20 menit</td></tr>
          </table>

        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div style="padding:12px">
          <h3 style="margin:0">Quick Links</h3>
          <p class="muted">Gunakan peta ini untuk presentasi, brosur kampus, atau navigasi awal bagi mahasiswa baru.</p>
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
            <button class="btn ghost" id="exportPNG">Export PNG</button>
            <button class="btn ghost" id="resetView">Reset View</button>
          </div>
        </div>
      </div>

    </aside>
  </main>

  <footer class="wrap"><div class="muted">© 2025 Universitas Seruni — Peta Interaktif Kampus</div></footer>

  <script>
    // Data for campuses
    const campusData = {
      KampusUtama: {
        title: 'Kampus Utama',
        sub: 'Jl. Semeru Raya No. 99, Jakarta Selatan',
        desc: 'Pusat akademik Universitas Seruni. Menjadi lokasi mayoritas fakultas S1 dan wilayah RIK untuk program sarjana kesehatan.',
        badge: 'Kampus Utama — RIK',
        coords: {x:300,y:220}
      },
      KampusKesehatan: {
        title: 'Kampus Kesehatan',
        sub: 'Jl. Medika No. 139, Jakarta Pusat',
        desc: 'Konsentrasi pendidikan profesi, riset klinis, dan fasilitas rumah sakit pendidikan.',
        badge: 'Kampus Kesehatan',
        coords: {x:540,y:110}
      },
      KampusSelatan: {
        title: 'Kampus Selatan',
        sub: 'Jl. Perjuangan Raya No. 39, Bogor Barat',
        desc: 'Kampus berbasis lahan: pertanian, kehutanan, seni rupa & pertunjukan, serta riset lapang.',
        badge: 'Kampus Selatan',
        coords: {x:210,y:520}
      },
      KampusVokasi: {
        title: 'Kampus Vokasi',
        sub: 'Jl. Satria No. 13, Jakarta Timur',
        desc: 'Pusat pendidikan vokasi dan teaching factory, fokus pada keterampilan terapan dan kerja industri.',
        badge: 'Kampus Vokasi',
        coords: {x:760,y:360}
      },
      RIK: {
        title: 'RIK (Rumpun Ilmu Kesehatan)',
        sub: 'Area RIK - Kampus Utama',
        desc: 'Wilayah khusus program sarjana bidang kesehatan (FK-KMK & Farmasi S1), dekat pusat riset dasar.',
        badge: 'RIK - S1',
        coords: {x:360,y:270}
      }
    };

    const svg = document.getElementById('campusMap');
    const panel = document.getElementById('panel');
    const panelTitle = document.getElementById('panelTitle');
    const panelSub = document.getElementById('panelSub');
    const panelBody = document.getElementById('panelBody');
    const panelBadge = document.getElementById('panelBadge');
    const btnClose = document.getElementById('btnClose');

    // Attach click handlers to campus groups (by id)
    Object.keys(campusData).forEach(id => {
      const g = document.getElementById(id);
      if(!g) return;
      g.style.cursor = 'pointer';
      g.addEventListener('click', (e)=>{
        showPanel(id);
      });
    });

    // Also attach handlers to side list
    document.querySelectorAll('.campus-item').forEach(el=>{
      el.addEventListener('click', ()=>{
        const id = el.getAttribute('data-id');
        showPanel(id);
      })
    });

    function showPanel(id){
      const d = campusData[id];
      panelTitle.textContent = d.title;
      panelSub.textContent = d.sub;
      panelBody.textContent = d.desc;
      panelBadge.textContent = d.badge;
      panel.style.display = 'block';

      // position panel smartly near the clicked campus
      // We'll compute a top offset based on campus coords
      const mapRect = document.getElementById('mapCard').getBoundingClientRect();
      const scaleX = mapRect.width / 1200;
      const scaleY = mapRect.height / 700;
      const screenX = mapRect.left + (d.coords.x * scaleX);
      const screenY = mapRect.top + (d.coords.y * scaleY);

      // position panel inside map (right side) but adjust top
      const panelEl = panel;
      const localY = (d.coords.y / 700) * (mapRect.height - 60);
      panelEl.style.top = Math.max(10, localY) + 'px';
    }

    btnClose.addEventListener('click', ()=>{panel.style.display='none'});

    // Toggle routes
    const toggleRoutes = document.getElementById('toggleRoutes');
    toggleRoutes.addEventListener('click', ()=>{
      document.querySelectorAll('.route').forEach(r=>{
        r.style.display = (r.style.display==='none')? '': 'none';
      });
    });

    // Shuttle animation along a selected route (US route example)
    let animId = null;
    let t = 0;
    const shuttle = document.getElementById('shuttle');
    const routeUS = document.getElementById('route_US');
    const routeUK = document.getElementById('route_UK');
    const routeUV = document.getElementById('route_UV');
    const routeKS = document.getElementById('route_KS');

    // helper: get point at length along path
    function moveShuttleAlong(pathEl, progress){
      const len = pathEl.getTotalLength();
      const pt = pathEl.getPointAtLength(progress * len);
      shuttle.setAttribute('cx', pt.x);
      shuttle.setAttribute('cy', pt.y);
    }

    function animate(){
      // cycle through routes: UK -> UV -> KS -> US
      const cycle = [routeUK, routeUV, routeKS, routeUS];
      const seg = Math.floor(t) % cycle.length;
      const frac = t - Math.floor(t);
      moveShuttleAlong(cycle[seg], frac);
      t += 0.005; // speed
      animId = requestAnimationFrame(animate);
    }

    document.getElementById('playShuttle').addEventListener('click', ()=>{
      if(animId) cancelAnimationFrame(animId);
      animId = requestAnimationFrame(animate);
    });
    document.getElementById('stopShuttle').addEventListener('click', ()=>{ if(animId) cancelAnimationFrame(animId); animId=null; });

    // Export PNG (simple SVG -> canvas)
    document.getElementById('exportPNG').addEventListener('click', ()=>{
      const svgEl = document.getElementById('campusMap');
      const serializer = new XMLSerializer();
      const svgStr = serializer.serializeToString(svgEl);
      const canvas = document.createElement('canvas');
      const rect = svgEl.getBoundingClientRect();
      canvas.width = rect.width*2; canvas.height = rect.height*2; // hi-res
      const img = new Image();
      const svgBlob = new Blob([svgStr], {type: 'image/svg+xml;charset=utf-8'});
      const url = URL.createObjectURL(svgBlob);
      img.onload = function(){
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#ffffff'; ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
        URL.revokeObjectURL(url);
        const png = canvas.toDataURL('image/png');
        const a = document.createElement('a'); a.href=png; a.download='Peta_Kampus_Seruni.png'; a.click();
      }
      img.src = url;
    });

    // Reset view
    document.getElementById('resetView').addEventListener('click', ()=>{ panel.style.display='none'; if(animId) cancelAnimationFrame(animId); animId=null; shuttle.setAttribute('cx',330); shuttle.setAttribute('cy',240); });

    // initial hide routes toggle off
    document.querySelectorAll('.route').forEach(r=>{ r.style.display=''; });

    // accessibility: keyboard navigation for campus items
    document.querySelectorAll('.campus-item').forEach((el,i)=>{ el.tabIndex=0; el.addEventListener('keypress',(e)=>{ if(e.key==='Enter') el.click(); }); });
  </script>
</body>
</html>
